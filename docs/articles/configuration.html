<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Set up an Azure ML workspace • azuremlsdk</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Set up an Azure ML workspace">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">azuremlsdk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.85</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">Install the Azure ML SDK for R</a>
    </li>
    <li>
      <a href="../articles/configuration.html">Set up an Azure ML workspace</a>
    </li>
    <li>
      <a href="../articles/train-and-deploy-to-aci/train-and-deploy-to-aci.html">Train and deploy your first model with Azure ML</a>
    </li>
    <li>
      <a href="../articles/train-with-tensorflow/train-with-tensorflow.html">Train a TensorFlow model</a>
    </li>
    <li>
      <a href="../articles/hyperparameter-tune-with-keras/hyperparameter-tune-with-keras.html">Hyperparameter tune a Keras model</a>
    </li>
    <li>
      <a href="../articles/deploy-to-aks/deploy-to-aks.html">Deploy a web service to Azure Kubernetes Service</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/azure/azureml-sdk-for-r">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Set up an Azure ML workspace</h1>
            
            <h4 class="date">2020-02-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/azure/azureml-sdk-for-r/blob/master/vignettes/configuration.Rmd"><code>vignettes/configuration.Rmd</code></a></small>
      <div class="hidden name"><code>configuration.Rmd</code></div>

    </div>

    
    
<p>This tutorial gets you started with the Azure Machine Learning service by walking through the requirements and instructions for setting up a workspace, the top-level resource for Azure ML.</p>
<p>You do not need run this if you are working on an Azure Machine Learning Compute Instance, as the compute instance is already associated with an existing workspace.</p>
<div id="what-is-an-azure-ml-workspace" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-an-azure-ml-workspace" class="anchor"></a>What is an Azure ML workspace?</h2>
<p>The workspace is the top-level resource for Azure ML, providing a centralized place to work with all the artifacts you create when you use Azure ML. The workspace keeps a history of all training runs, including logs, metrics, output, and a snapshot of your scripts.</p>
<p>When you create a new workspace, it automatically creates several Azure resources that are used by the workspace:</p>
<ul>
<li>Azure Container Registry: Registers docker containers that you use during training and when you deploy a model. To minimize costs, ACR is lazy-loaded until deployment images are created.</li>
<li>Azure Storage account: Used as the default datastore for the workspace.</li>
<li>Azure Application Insights: Stores monitoring information about your models.</li>
<li>Azure Key Vault: Stores secrets that are used by compute targets and other sensitive information that’s needed by the workspace.</li>
</ul>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>This section describes the steps required before you can access any Azure ML service functionality.</p>
<div id="azure-subscription" class="section level3">
<h3 class="hasAnchor">
<a href="#azure-subscription" class="anchor"></a>Azure subscription</h3>
<p>In order to create an Azure ML workspace, first you need access to an Azure subscription. An Azure subscription allows you to manage storage, compute, and other assets in the Azure cloud. You can <a href="https://azure.microsoft.com/en-us/free/">create a new subscription</a> or access existing subscription information from the <a href="https://portal.azure.com/">Azure portal</a>. Later in this tutorial you will need information such as your subscription ID in order to create and access workspaces.</p>
</div>
<div id="azure-ml-sdk-installation" class="section level3">
<h3 class="hasAnchor">
<a href="#azure-ml-sdk-installation" class="anchor"></a>Azure ML SDK installation</h3>
<p>Follow the <a href="https://azure.github.io/azureml-sdk-for-r/articles/installation.html">installation guide</a> to install <strong>azuremlsdk</strong> on your machine.</p>
</div>
</div>
<div id="configure-your-workspace" class="section level2">
<h2 class="hasAnchor">
<a href="#configure-your-workspace" class="anchor"></a>Configure your workspace</h2>
<div id="workspace-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#workspace-parameters" class="anchor"></a>Workspace parameters</h3>
<p>To use an Azure ML workspace, you will need to supply the following information:</p>
<ul>
<li>Your subscription ID</li>
<li>A resource group name</li>
<li>(Optional) The region that will host your workspace</li>
<li>A name for your workspace</li>
</ul>
<p>You can get your subscription ID from the <a href="https://portal.azure.com/">Azure portal</a>.</p>
<p>You will also need access to a <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview#resource-groups">resource group</a>, which organizes Azure resources and provides a default region for the resources in a group. You can see what resource groups to which you have access, or create a new one in the Azure portal. If you don’t have a resource group, the <code><a href="../reference/create_workspace.html">create_workspace()</a></code> method will create one for you using the name you provide.</p>
<p>The region to host your workspace will be used if you are creating a new workspace. You do not need to specify this if you are using an existing workspace. You can find the list of supported regions <a href="https://azure.microsoft.com/en-us/global-infrastructure/services/?products=machine-learning-service">here</a>. You should pick a region that is close to your location or that contains your data.</p>
<p>The name for your workspace is unique within the subscription and should be descriptive enough to discern among other workspaces. The subscription may be used only by you, or it may be used by your department or your entire enterprise, so choose a name that makes sense for your situation.</p>
<p>The following code chunk allows you to specify your workspace parameters. It uses <code>Sys.getenv</code> to read values from environment variables, which is useful for automation. If no environment variable exists, the parameters will be set to the specified default values. Replace the default values in the code below with your default parameter values.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>subscription_id &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"SUBSCRIPTION_ID"</span>, <span class="dt">unset =</span> <span class="st">"&lt;my-subscription-id&gt;"</span>)</span>
<span id="cb1-2"><a href="#cb1-2"></a>resource_group &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"RESOURCE_GROUP"</span>, <span class="dt">default=</span><span class="st">"&lt;my-resource-group&gt;"</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a>workspace_name &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"WORKSPACE_NAME"</span>, <span class="dt">default=</span><span class="st">"&lt;my-workspace-name&gt;"</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a>workspace_region &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"WORKSPACE_REGION"</span>, <span class="dt">default=</span><span class="st">"eastus2"</span>)</span></code></pre></div>
</div>
<div id="create-a-new-workspace" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-new-workspace" class="anchor"></a>Create a new workspace</h3>
<p>If you don’t have an existing workspace and are the owner of the subscription or resource group, you can create a new workspace. If you don’t have a resource group, <code><a href="../reference/create_workspace.html">create_workspace()</a></code> will create one for you using the name you provide. If you don’t want it to do so, set the <code>create_resource_group = FALSE</code> parameter.</p>
<p>Note: As with other Azure services, there are limits on certain resources (e.g. AmlCompute quota) associated with the Azure ML service. Please read this <a href="https://docs.microsoft.com/en-us/azure/machine-learning/service/how-to-manage-quotas">article</a> on the default limits and how to request more quota.</p>
<p>This cell will create an Azure ML workspace for you in a subscription, provided you have the correct permissions.</p>
<p>This will fail if:</p>
<ul>
<li>You do not have permission to create a workspace in the resource group.</li>
<li>You do not have permission to create a resource group if it does not exist.</li>
<li>You are not a subscription owner or contributor and no Azure ML workspaces have ever been created in this subscription.</li>
</ul>
<p>If workspace creation fails, please work with your IT admin to provide you with the appropriate permissions or to provision the required resources.</p>
<p>There are additional parameters that are not shown below that can be configured when creating a workspace. Please see <a href="https://azure.github.io/azureml-sdk-for-r/reference/create_workspace.html"><code><a href="../reference/create_workspace.html">create_workspace()</a></code></a> for more details.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(azuremlsdk)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>ws &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_workspace.html">create_workspace</a></span>(<span class="dt">name =</span> workspace_name,</span>
<span id="cb2-4"><a href="#cb2-4"></a>                       <span class="dt">subscription_id =</span> subscription_id,</span>
<span id="cb2-5"><a href="#cb2-5"></a>                       <span class="dt">resource_group =</span> resource_group,</span>
<span id="cb2-6"><a href="#cb2-6"></a>                       <span class="dt">location =</span> workspace_region,</span>
<span id="cb2-7"><a href="#cb2-7"></a>                       <span class="dt">exist_ok =</span> <span class="ot">TRUE</span>,</span>
<span id="cb2-8"><a href="#cb2-8"></a>                       <span class="dt">auth =</span> authentication)</span></code></pre></div>
<p>You can out write out the workspace ARM properties to a config file with <a href="https://azure.github.io/azureml-sdk-for-r/reference/write_workspace_config.html"><code><a href="../reference/write_workspace_config.html">write_workspace_config()</a></code></a>. The method provides a simple way of reusing the same workspace across multiple files or projects. Users can save the workspace details with <code><a href="../reference/write_workspace_config.html">write_workspace_config()</a></code>, and use <a href="https://azure.github.io/azureml-sdk-for-r/reference/load_workspace_from_config.html"><code><a href="../reference/load_workspace_from_config.html">load_workspace_from_config()</a></code></a> to load the same workspace in different files or projects without retyping the workspace ARM properties. The method defaults to writing out the config file to the current working directory with “config.json” as the file name. To specify a different path or file name, set the <code>path</code> and <code>file_name</code> parameters.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="../reference/write_workspace_config.html">write_workspace_config</a></span>(ws)</span></code></pre></div>
</div>
<div id="access-an-existing-workspace" class="section level3">
<h3 class="hasAnchor">
<a href="#access-an-existing-workspace" class="anchor"></a>Access an existing workspace</h3>
<p>You can access an existing workspace in a couple of ways. If your workspace properties were previously saved to a config file, you can load the workspace as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>ws &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_workspace_from_config.html">load_workspace_from_config</a></span>()</span></code></pre></div>
<p>If Azure ML cannot find the config file, specify the path to the config file with the <code>path</code> parameter. The method defaults to starting the search in the current directory.</p>
<p>You can also initialize a workspace using the <a href="https://azure.github.io/azureml-sdk-for-r/reference/get_workspace.html"><code><a href="../reference/get_workspace.html">get_workspace()</a></code></a> method.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>ws &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_workspace.html">get_workspace</a></span>(<span class="dt">name =</span> workspace_name,</span>
<span id="cb5-2"><a href="#cb5-2"></a>                    <span class="dt">subscription_id =</span> subscription_id,</span>
<span id="cb5-3"><a href="#cb5-3"></a>                    <span class="dt">resource_group =</span> resource_group,</span>
<span id="cb5-4"><a href="#cb5-4"></a>                    <span class="dt">auth =</span> authentication)</span></code></pre></div>
</div>
<div id="authenticate-a-workspace" class="section level3">
<h3 class="hasAnchor">
<a href="#authenticate-a-workspace" class="anchor"></a>Authenticate a workspace</h3>
<p>It will sometimes be necessary to provide authentication when accessing a workspace.</p>
<p>If you receive an error:</p>
<pre><code>AuthenticationException: You don't have access to xxxxxx-xxxx-xxx-xxx-xxxxxxxxxx subscription. All the subscriptions that you have access to = ...
check that the you used correct login and entered the correct subscription ID.</code></pre>
<p>or</p>
<pre><code>All the subscriptions that you have access to = []</code></pre>
<p>You may have to specify the tenant ID of the Azure Active Directory you’re using in order to gain access. An example would be accessing a subscription as a guest to a tenant that is not your default.</p>
<p>AzureML SDK for R supports two authentication methods: <code>service_principal_authentication</code> and <code>interactive_login_authentication</code>. Interactive Login Authenticaion is suitable for local experimentation while Service Principal Authentication is suitable for automated workflows. To use either, construct the authenticator object and assign it to the <code>auth</code> param of <code>get_workspace</code> or <code>create_workspace</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>interactive_auth &lt;-<span class="st"> </span><span class="kw"><a href="../reference/interactive_login_authentication.html">interactive_login_authentication</a></span>(<span class="dt">tenant_id=</span><span class="st">"your-tenant-id"</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>ws &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_workspace.html">get_workspace</a></span>(<span class="st">"&lt;your workspace name&gt;"</span>,</span>
<span id="cb8-4"><a href="#cb8-4"></a>                    <span class="st">"&lt;your subscription ID&gt;"</span>,</span>
<span id="cb8-5"><a href="#cb8-5"></a>                    <span class="st">"&lt;your resource group&gt;"</span>,</span>
<span id="cb8-6"><a href="#cb8-6"></a>                    <span class="dt">auth =</span> interactive_auth)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>svc_pr_password &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"AZUREML_PASSWORD"</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>svc_pr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/service_principal_authentication.html">service_principal_authentication</a></span>(<span class="dt">tenant_id=</span><span class="st">"my-tenant-id"</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>                                           <span class="dt">service_principal_id=</span><span class="st">"my-application-id"</span>,</span>
<span id="cb9-4"><a href="#cb9-4"></a>                                           <span class="dt">service_principal_password=</span>svc_pr_password)</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a>ws &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_workspace.html">get_workspace</a></span>(<span class="st">"&lt;your workspace name&gt;"</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>                    <span class="st">"&lt;your subscription ID&gt;"</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>                    <span class="st">"&lt;your resource group&gt;"</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>                    <span class="dt">auth =</span> svc_pr)</span></code></pre></div>
<p>For more information on the two methods, read <a href="https://github.com/Azure/MachineLearningNotebooks/blob/master/how-to-use-azureml/manage-azureml-service/authentication-in-azureml/authentication-in-azureml.ipynb">the official Azure Machine Learning documentation</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#what-is-an-azure-ml-workspace">What is an Azure ML workspace?</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#configure-your-workspace">Configure your workspace</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Heemanshu Suri, Billy Hu, Diondra Peck, Minna Xiao, Microsoft.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
