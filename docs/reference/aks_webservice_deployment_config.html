<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a deployment config for deploying an AKS web service — aks_webservice_deployment_config • azuremlsdk</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Create a deployment config for deploying an AKS web service — aks_webservice_deployment_config" />

<meta property="og:description" content="Deploy a web service to Azure Kubernetes Service for high-scale
prodution deployments. Provides fast response time and autoscaling
of the deployed service. Using GPU for inference when deployed as a
web service is only supported on AKS.
Deploy to AKS if you need one or more of the following capabilities:
Fast response time
Autoscaling of the deployed service
Hardware acceleration options

" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">azuremlsdk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.10.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/installation.html">Install the Azure ML SDK for R</a>
    </li>
    <li>
      <a href="../articles/configuration.html">Set up an Azure ML workspace</a>
    </li>
    <li>
      <a href="../articles/train-and-deploy-first-model.html">Train and deploy your first model with Azure ML</a>
    </li>
    <li>
      <a href="../articles/train-with-tensorflow.html">Train a TensorFlow model</a>
    </li>
    <li>
      <a href="../articles/hyperparameter-tune-with-keras.html">Hyperparameter tune a Keras model</a>
    </li>
    <li>
      <a href="../articles/deploy-to-aks.html">Deploy a web service to Azure Kubernetes Service</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Guides</li>
    <li>
      <a href="../articles/deploying-models.html">Deploying models</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/azure/azureml-sdk-for-r">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a deployment config for deploying an AKS web service</h1>
    <small class="dont-index">Source: <a href='https://github.com/azure/azureml-sdk-for-r/blob/master/R/webservice-aks.R'><code>R/webservice-aks.R</code></a></small>
    <div class="hidden name"><code>aks_webservice_deployment_config.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Deploy a web service to Azure Kubernetes Service for high-scale
prodution deployments. Provides fast response time and autoscaling
of the deployed service. Using GPU for inference when deployed as a
web service is only supported on AKS.</p>
<p>Deploy to AKS if you need one or more of the following capabilities:</p><ul>
<li><p>Fast response time</p></li>
<li><p>Autoscaling of the deployed service</p></li>
<li><p>Hardware acceleration options</p></li>
</ul>

    
    </div>

    <pre class="usage"><span class='fu'>aks_webservice_deployment_config</span>(<span class='kw'>autoscale_enabled</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>autoscale_min_replicas</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>autoscale_max_replicas</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>autoscale_refresh_seconds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>autoscale_target_utilization</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>auth_enabled</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cpu_cores</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>memory_gb</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>enable_app_insights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>scoring_timeout_ms</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>replica_max_concurrent_requests</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>max_request_wait_time</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>num_replicas</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>primary_key</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>secondary_key</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>tags</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>properties</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>description</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>gpu_cores</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>period_seconds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>initial_delay_seconds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>timeout_seconds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>success_threshold</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>failure_threshold</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>namespace</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>token_auth_enabled</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>autoscale_enabled</th>
      <td><p>If <code>TRUE</code> enable autoscaling for the web service.
Defaults to <code>TRUE</code> if <code>num_replicas = NULL</code>.</p></td>
    </tr>
    <tr>
      <th>autoscale_min_replicas</th>
      <td><p>An int of the minimum number of containers
to use when autoscaling the web service. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>autoscale_max_replicas</th>
      <td><p>An int of the maximum number of containers
to use when autoscaling the web service. Defaults to <code>10</code>.</p></td>
    </tr>
    <tr>
      <th>autoscale_refresh_seconds</th>
      <td><p>An int of how often in seconds the
autoscaler should attempt to scale the web service. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>autoscale_target_utilization</th>
      <td><p>An int of the target utilization
(in percent out of 100) the autoscaler should attempt to maintain for
the web service. Defaults to <code>70</code>.</p></td>
    </tr>
    <tr>
      <th>auth_enabled</th>
      <td><p>If <code>TRUE</code> enable key-based authentication for the
web service. Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>cpu_cores</th>
      <td><p>The number of cpu cores to allocate for
the web service. Can be a decimal. Defaults to <code>0.1</code>.</p></td>
    </tr>
    <tr>
      <th>memory_gb</th>
      <td><p>The amount of memory (in GB) to allocate for
the web service. Can be a decimal. Defaults to <code>0.5</code>.</p></td>
    </tr>
    <tr>
      <th>enable_app_insights</th>
      <td><p>If <code>TRUE</code> enable AppInsights for the web service.
Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>scoring_timeout_ms</th>
      <td><p>An int of the timeout (in milliseconds) to
enforce for scoring calls to the web service. Defaults to <code>60000</code>.</p></td>
    </tr>
    <tr>
      <th>replica_max_concurrent_requests</th>
      <td><p>An int of the number of maximum
concurrent requests per node to allow for the web service. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>max_request_wait_time</th>
      <td><p>An int of the maximum amount of time a request
will stay in the queue (in milliseconds) before returning a 503 error.
Defaults to <code>500</code>.</p></td>
    </tr>
    <tr>
      <th>num_replicas</th>
      <td><p>An int of the number of containers to allocate for the
web service. If this parameter is not set then the autoscaler is enabled by
default.</p></td>
    </tr>
    <tr>
      <th>primary_key</th>
      <td><p>A string of the primary auth key to use for the web service.</p></td>
    </tr>
    <tr>
      <th>secondary_key</th>
      <td><p>A string of the secondary auth key to use for the web
service.</p></td>
    </tr>
    <tr>
      <th>tags</th>
      <td><p>A named list of key-value tags for the web service,
e.g. <code><a href='https://rdrr.io/r/base/list.html'>list("key" = "value")</a></code>.</p></td>
    </tr>
    <tr>
      <th>properties</th>
      <td><p>A named list of key-value properties for the web
service, e.g. <code><a href='https://rdrr.io/r/base/list.html'>list("key" = "value")</a></code>. These properties cannot
be changed after deployment, but new key-value pairs can be added.</p></td>
    </tr>
    <tr>
      <th>description</th>
      <td><p>A string of the description to give the web service</p></td>
    </tr>
    <tr>
      <th>gpu_cores</th>
      <td><p>An int of the number of gpu cores to allocate for the
web service. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>period_seconds</th>
      <td><p>An int of how often in seconds to perform the
liveness probe. Default to <code>10</code>. Minimum value is <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>initial_delay_seconds</th>
      <td><p>An int of the number of seconds after
the container has started before liveness probes are initiated.
Defaults to <code>310</code>.</p></td>
    </tr>
    <tr>
      <th>timeout_seconds</th>
      <td><p>An int of the number of seconds after which the
liveness probe times out. Defaults to <code>2</code>. Minimum value is <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>success_threshold</th>
      <td><p>An int of the minimum consecutive successes
for the liveness probe to be considered successful after having failed.
Defaults to <code>1</code>. Minimum value is <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>failure_threshold</th>
      <td><p>An int of the number of times Kubernetes will try
the liveness probe when a Pod starts and the probe fails, before giving up.
Defaults to <code>3</code>. Minimum value is <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>namespace</th>
      <td><p>A string of the Kubernetes namespace in which to deploy the web service:
up to 63 lowercase alphanumeric ('a'-'z', '0'-'9') and hyphen ('-') characters. The first
last characters cannot be hyphens.</p></td>
    </tr>
    <tr>
      <th>token_auth_enabled</th>
      <td><p>If <code>TRUE</code>, enable token-based authentication for the web service.
If enabled, users can access the web service by fetching an access token using their Azure
Active Directory credentials. Defaults to <code>FALSE</code>. Both <code>token_auth_enabled</code> and
<code>auth_enabled</code> cannot be set to <code>TRUE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The <code>AksServiceDeploymentConfiguration</code> object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    
<h3>AKS compute target</h3>
<p>When deploying to AKS, you deploy to an AKS cluster that is connected to your workspace.
There are two ways to connect an AKS cluster to your workspace:</p><ul>
<li><p>Create the AKS cluster using Azure ML (see <code>create_aks_compute()</code>).</p></li>
<li><p>Attach an existing AKS cluster to your workspace (see <code>attach_aks_compute()</code>).</p></li>
</ul>

<p>Pass the <code>AksCompute</code> object to the <code>deployment_target</code> parameter of <code>deploy_model()</code>.</p>
<h3>Token-based authentication</h3>
<p>We strongly recommend that you create your Azure ML workspace in the same region as your
AKS cluster. To authenticate with a token, the web service will make a call to the region
in which your workspace is created. If your workspace's region is unavailable, then you will
not be able to fetch a token for your web service, even if your cluster is in a different region
than your workspace. This effectively results in token-based auth being unavailable until your
workspace's region is available again. In addition, the greater the distance between your
cluster's region and your workspace's region, the longer it will take to fetch a token.</p>

    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>deploy_model()</code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>deployment_config</span> <span class='kw'>&lt;-</span> <span class='fu'>aks_webservice_deployment_config</span>(<span class='kw'>cpu_cores</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>memory_gb</span> <span class='kw'>=</span> <span class='fl'>1</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by AzureML R SDK Team, Microsoft.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


