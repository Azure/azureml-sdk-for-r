<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a configuration for a HyperDrive run — hyperdrive_config • azuremlsdk</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Create a configuration for a HyperDrive run — hyperdrive_config" />

<meta property="og:description" content="The HyperDrive configuration includes information about hyperparameter
space sampling, termination policy, primary metric, estimator, and
the compute target to execute the experiment runs on.
To submit the HyperDrive experiment, pass the HyperDriveConfig object
returned from this method to submit_experiment()." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">azuremlsdk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.10.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/installation.html">Install the Azure ML SDK for R</a>
    </li>
    <li>
      <a href="../articles/configuration.html">Set up an Azure ML workspace</a>
    </li>
    <li>
      <a href="../articles/train-and-deploy-first-model.html">Train and deploy your first model with Azure ML</a>
    </li>
    <li>
      <a href="../articles/train-with-tensorflow.html">Train a TensorFlow model</a>
    </li>
    <li>
      <a href="../articles/hyperparameter-tune-with-keras.html">Hyperparameter tune a Keras model</a>
    </li>
    <li>
      <a href="../articles/deploy-to-aks.html">Deploy a web service to Azure Kubernetes Service</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Guides</li>
    <li>
      <a href="../articles/building-custom-docker-images.html">Building custom Docker images for training and deployment</a>
    </li>
    <li>
      <a href="../articles/deploying-models.html">Deploying models</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/azure/azureml-sdk-for-r">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a configuration for a HyperDrive run</h1>
    <small class="dont-index">Source: <a href='https://github.com/azure/azureml-sdk-for-r/blob/master/R/hyperdrive.R'><code>R/hyperdrive.R</code></a></small>
    <div class="hidden name"><code>hyperdrive_config.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>The HyperDrive configuration includes information about hyperparameter
space sampling, termination policy, primary metric, estimator, and
the compute target to execute the experiment runs on.</p>
<p>To submit the HyperDrive experiment, pass the <code>HyperDriveConfig</code> object
returned from this method to <code>submit_experiment()</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>hyperdrive_config</span>(
  <span class='no'>hyperparameter_sampling</span>,
  <span class='no'>primary_metric_name</span>,
  <span class='no'>primary_metric_goal</span>,
  <span class='no'>max_total_runs</span>,
  <span class='kw'>max_concurrent_runs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>max_duration_minutes</span> <span class='kw'>=</span> <span class='fl'>10080L</span>,
  <span class='kw'>policy</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>estimator</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>hyperparameter_sampling</th>
      <td><p>The hyperparameter sampling space.
Can be a <code>RandomParameterSampling</code>, <code>GridParameterSampling</code>, or
<code>BayesianParameterSampling</code> object.</p></td>
    </tr>
    <tr>
      <th>primary_metric_name</th>
      <td><p>A string of the name of the primary metric
reported by the experiment runs.</p></td>
    </tr>
    <tr>
      <th>primary_metric_goal</th>
      <td><p>The <code>PrimaryMetricGoal</code> object. This
parameter determines if the primary metric is to be minimized or
maximized when evaluating runs.</p></td>
    </tr>
    <tr>
      <th>max_total_runs</th>
      <td><p>An integer of the maximum total number of runs
to create. This is the upper bound; there may be fewer runs when the
sample space is smaller than this value. If both <code>max_total_runs</code> and
<code>max_duration_minutes</code> are specified, the hyperparameter tuning experiment
terminates when the first of these two thresholds is reached.</p></td>
    </tr>
    <tr>
      <th>max_concurrent_runs</th>
      <td><p>An integer of the maximum number of runs to
execute concurrently. If <code>NULL</code>, all runs are launched in parallel.
The number of concurrent runs is gated on the resources available in the
specified compute target. Hence, you need to ensure that the compute target
has the available resources for the desired concurrency.</p></td>
    </tr>
    <tr>
      <th>max_duration_minutes</th>
      <td><p>An integer of the maximum duration of the
HyperDrive run. Once this time is exceeded, any runs still executing are
cancelled. If both <code>max_total_runs</code> and <code>max_duration_minutes</code> are specified,
the hyperparameter tuning experiment terminates when the first of these two
thresholds is reached.</p></td>
    </tr>
    <tr>
      <th>policy</th>
      <td><p>The early termination policy to use. Can be either a
<code>BanditPolicy</code>, <code>MedianStoppingPolicy</code>, or <code>TruncationSelectionPolicy</code>
object. If <code>NULL</code> (the default), no early termination policy will be used.</p>
<p>The <code>MedianStoppingPolicy</code> with <code>delay_evaluation of = 5</code> is a good
termination policy to start with. These are conservative settings that can
provide 25%-35% savings with no loss on primary metric
(based on our evaluation data).</p></td>
    </tr>
    <tr>
      <th>estimator</th>
      <td><p>The <code>Estimator</code> object.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The <code>HyperDriveConfig</code> object.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>submit_experiment()</code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Load the workspace</span>
<span class='no'>ws</span> <span class='kw'>&lt;-</span> <span class='fu'>load_workspace_from_config</span>()

<span class='co'># Get the compute target</span>
<span class='no'>compute_target</span> <span class='kw'>&lt;-</span> <span class='fu'>get_compute</span>(<span class='no'>ws</span>, <span class='kw'>cluster_name</span> <span class='kw'>=</span> <span class='st'>'mycluster'</span>)

<span class='co'># Define the primary metric goal</span>
<span class='no'>goal</span> <span class='kw'>=</span> <span class='fu'>primary_metric_goal</span>(<span class='st'>"MAXIMIZE"</span>)

<span class='co'># Define the early termination policy</span>
<span class='no'>early_termination_policy</span> <span class='kw'>=</span> <span class='fu'>median_stopping_policy</span>(<span class='kw'>evaluation_interval</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
                                                  <span class='kw'>delay_evaluation</span> <span class='kw'>=</span> <span class='fl'>5L</span>)

<span class='co'># Create the estimator</span>
<span class='no'>est</span> <span class='kw'>&lt;-</span> <span class='fu'>estimator</span>(<span class='kw'>source_directory</span> <span class='kw'>=</span> <span class='st'>'.'</span>,
                 <span class='kw'>entry_script</span> <span class='kw'>=</span> <span class='st'>'train.R'</span>,
                 <span class='kw'>compute_target</span> <span class='kw'>=</span> <span class='no'>compute_target</span>)

<span class='co'># Create the HyperDrive configuration</span>
<span class='no'>hyperdrive_run_config</span> <span class='kw'>=</span> <span class='fu'>hyperdrive_config</span>(
                                   <span class='kw'>hyperparameter_sampling</span> <span class='kw'>=</span> <span class='no'>param_sampling</span>,
                                   <span class='kw'>primary_metric_name</span> <span class='kw'>=</span> <span class='st'>'accuracy'</span>,
                                   <span class='kw'>primary_metric_goal</span> <span class='kw'>=</span> <span class='no'>goal</span>,
                                   <span class='kw'>max_total_runs</span> <span class='kw'>=</span> <span class='fl'>100</span>,
                                   <span class='kw'>max_concurrent_runs</span> <span class='kw'>=</span> <span class='fl'>4</span>,
                                   <span class='kw'>policy</span> <span class='kw'>=</span> <span class='no'>early_termination_policy</span>,
                                   <span class='kw'>estimator</span> <span class='kw'>=</span> <span class='no'>est</span>)

<span class='co'># Submit the HyperDrive experiment</span>
<span class='no'>exp</span> <span class='kw'>&lt;-</span> <span class='fu'>experiment</span>(<span class='no'>ws</span>, <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>'myexperiment'</span>)
<span class='no'>run</span> <span class='kw'>=</span> <span class='fu'>submit_experiment</span>(<span class='no'>exp</span>, <span class='no'>hyperdrive_run_config</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Diondra Peck, Minna Xiao, Microsoft.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


